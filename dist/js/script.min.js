"use strict";var e=document.getElementById("game"),t=e.getContext("2d"),r=16,l=0,d={x:160,y:160,dx:r,dy:0,cells:[],maxCells:4},n={x:320,y:320},c=document.querySelector(".currentScore > span"),y=document.querySelector(".highScore > span"),i=localStorage.getItem("highScore")||0;y.innerHTML=String(i).padStart(3,"0");var a=function(e,t){return Math.floor(Math.random()*(t-e))+e},o=0;c.innerHTML=String(o).padStart(3,"0");var x=function x(){requestAnimationFrame(x),++l<4||(l=0,t.clearRect(0,0,e.width,e.height),d.x+=d.dx,d.y+=d.dy,d.x<0?d.x=e.width-r:d.x>=e.width&&(d.x=0),d.y<0?d.y=e.height-r:d.y>=e.height&&(d.y=0),d.cells.unshift({x:d.x,y:d.y}),d.cells.length>d.maxCells&&d.cells.pop(),t.fillStyle="yellow",t.fillRect(n.x,n.y,r-1,r-1),t.fillStyle="white",d.cells.forEach((function(e,l){t.fillRect(e.x,e.y,r-1,r-1),e.x===n.x&&e.y===n.y&&(d.maxCells+=1,o+=1,c.innerHTML=String(o).padStart(3,"0"),o>i&&(i=o,localStorage.setItem("highScore",i),y.innerHTML=String(i).padStart(3,"0")),n.x=a(0,25)*r,n.y=a(0,25)*r);for(var x=l+1;x<d.cells.length;x+=1)e.x===d.cells[x].x&&e.y===d.cells[x].y&&(d.x=160,d.y=160,d.cells=[],d.maxCells=4,d.dx=r,d.dy=0,n.x=a(0,25)*r,n.y=a(0,25)*r,o=0,c.innerHTML=String(o).padStart(3,"0"))})))};document.addEventListener("keydown",(function(e){37===e.which&&0===d.dx?(d.dx=-r,d.dy=0):38===e.which&&0===d.dy?(d.dy=-r,d.dx=0):39===e.which&&0===d.dx?(d.dx=r,d.dy=0):40===e.which&&0===d.dy&&(d.dy=r,d.dx=0)}));var h=document.querySelector(".controls"),S=h.querySelector(".up"),g=h.querySelector(".left"),s=h.querySelector(".right"),u=h.querySelector(".down");h.addEventListener("click",(function(e){e.target===g&&0===d.dx?(d.dx=-r,d.dy=0):e.target===S&&0===d.dy?(d.dy=-r,d.dx=0):e.target===s&&0===d.dx?(d.dx=r,d.dy=0):e.target===u&&0===d.dy&&(d.dy=r,d.dx=0)})),requestAnimationFrame(x);